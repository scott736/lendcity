---
interface Props {
  currentPage: number;
  totalPages: number;
  basePath: string;
}

const { currentPage, totalPages, basePath } = Astro.props;

const pages = Array.from({ length: totalPages }, (_, i) => i + 1);

function getPageUrl(page: number): string {
  if (page === 1) return basePath + '/';
  return `${basePath}/page/${page}/`;
}
---

{totalPages > 1 && (
  <nav class="flex items-center justify-center gap-2 mt-12" aria-label="Pagination">
    {/* Previous */}
    {currentPage > 1 ? (
      <a
        href={getPageUrl(currentPage - 1)}
        class="btn-ghost px-3"
        aria-label="Previous page"
      >
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </a>
    ) : (
      <span class="btn-ghost px-3 opacity-50 cursor-not-allowed">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </span>
    )}

    {/* Page Numbers */}
    {pages.map((page) => (
      page === currentPage ? (
        <span
          class="btn bg-primary-600 text-white px-4"
          aria-current="page"
        >
          {page}
        </span>
      ) : (
        <a
          href={getPageUrl(page)}
          class="btn-ghost px-4"
        >
          {page}
        </a>
      )
    ))}

    {/* Next */}
    {currentPage < totalPages ? (
      <a
        href={getPageUrl(currentPage + 1)}
        class="btn-ghost px-3"
        aria-label="Next page"
      >
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    ) : (
      <span class="btn-ghost px-3 opacity-50 cursor-not-allowed">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </span>
    )}
  </nav>
)}
